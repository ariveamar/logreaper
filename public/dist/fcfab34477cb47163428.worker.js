!function(e){function a(t){if(r[t])return r[t].exports;var i=r[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}var r={};return a.m=e,a.c=r,a.p="/labs/logreaper/static/dist/",a(0)}([function(e,a,r){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}var i,n,s=r(1),l=t(s);importScripts("/labs/logreaper/static/js/lib/xregexp-all-min.js"),importScripts("/labs/logreaper/static/js/lib/stringview.js"),importScripts("/labs/logreaper/static/js/lib/moment.min.js"),importScripts("/labs/logreaper/static/js/lib/FileIdentifier.js"),importScripts("/labs/logreaper/static/js/lib/Iterator.js"),importScripts("/labs/logreaper/static/js/lib/ChunkParser.js"),n=function(e){var a,r;a=new ArrayBuffer(e.length),r=new Uint8Array(a);for(var t=0,i=e.length;t<i;t++)r[t]=e.charCodeAt(t);return a},i=!1,navigator.userAgent.indexOf("Firefox")!==-1&&parseFloat(navigator.userAgent.substring(navigator.userAgent.indexOf("Firefox")+8))>=3.6&&(i=!0),self.addEventListener("message",function(e){var a,r,t,n,s,o,d,f,u,c,p,g,m,h,w,v,x,b,S,y,j,A,M,k,F,C;switch(e.data.cmd){case"identify":a=e.data.file.slice||e.data.file.mozSlice||e.data.file.webkitSlice,r=1048576,y=void 0,n=new StringView(y.readAsArrayBuffer(a.call(e.data.file,0,r))),f=new logreaper.FileIdentifier(e.data.formats,XRegExp),v=f.identify(n.toString()),self.postMessage({cmd:"identificationComplete",result:v,hash:e.data.hash}),self.close();break;case"parse":return x=void 0,a=e.data.file.slice||e.data.file.mozSlice||e.data.file.webkitSlice,r=1048576,t=Math.ceil(e.data.file.size/r),o=0,m=void 0,u=e.data.identification,b=e.data.parseSeverities,A=e.data.severityField,S=[],null!=(null!=(j=u.format.value[A])?j.values:void 0)&&u.format.value[A].values.forEach(function(e){if(b.indexOf(e.label)===-1)return e.values.forEach(function(e){return S.push(e)})}),self.postMessage({cmd:"initialMetadata",totalChunks:t}),s=0,k=0,d=0,M=Date.now(),F=t,C=XRegExp.cache(u.format.regex[u.identifiedRegexName].pattern,"gim"),p=function(a){var r,s,d,f,c,p;n=new StringView(a),x=new logreaper.ChunkParser({chunk:n.toString(),moment:moment,Xreg:XRegExp,re:C,format:u.format,identification:u}),d=x.parse(),s={cmd:"parsingProgress",hash:e.data.hash,progress:o/F,linesParsed:k,chunksParsed:o},self.postMessage(s);try{return d.forEach(function(a){return null!=a&&(null!=S?S.indexOf(a[A]):void 0)===-1&&(a.fileName=decodeURIComponent(e.data.name).replace(/[\(\) ]+/g,""),null!=a&&self.postMessage({cmd:"lineParsed",hash:e.data.hash,parsedLine:(0,l.default)(a)})),k++})}catch(a){return r=a,self.postMessage({cmd:"error",data:(0,l.default)(e)})}finally{o++,o<t?i===!0?w():h():(self.postMessage({cmd:"parsingComplete",hash:e.data.hash}),"undefined"!=typeof window&&null!==window&&null!=(f=window.logreaper)&&(f.ChunkParser=null),"undefined"!=typeof window&&null!==window&&null!=(c=window.logreaper)&&(c.FileIdentifier=null),"undefined"!=typeof window&&null!==window&&null!=(p=window.logreaper)&&(p.Iterator=null),self.close())}},c=function(e){return cb(e)},g=function(e){return p(e.target.result)},h=function(){var t,i;return i=new FileReader,i.onload=g,i.onerror=c,M=o*r,t=M+r>=e.data.file.size?e.data.file.size:M+r,i.readAsArrayBuffer(a.call(e.data.file,M,t))},w=function(){var t,i;return i=new FileReaderSync,M=o*r,t=M+r>=e.data.file.size?e.data.file.size:M+r,p(i.readAsArrayBuffer(a.call(e.data.file,M,t)))},i?w():h();case"status":return;case"stop":return self.close()}},!1)},function(e,a,r){e.exports={default:r(2),__esModule:!0}},function(e,a,r){var t=r(3);e.exports=function(e){return(t.JSON&&t.JSON.stringify||JSON.stringify).apply(JSON,arguments)}},function(e,a){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)}]);